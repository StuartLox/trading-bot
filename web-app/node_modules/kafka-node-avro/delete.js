const KafkaAvro = require('./');

const settings = {
  "kafka" : {
    "kafkaHost" : 'localhost:9092'
  },
  "schema" : {
    "registry" : 'http://localhost:8081'
  },

  "alive" : {
    endpoint : "subjects"
  }
};

KafkaAvro.init(settings).then( kafka => {
  console.log(kafka);
  //const producer = kafka.addProducer();
  //const consumer1 = kafka.addConsumer("transactions");

  //consumer1.on('error', error =>{ console.log(error); });
  //consumer1.on('message', message => { console.log(message); });

  //const consumer2 = kafka.addConsumer("nodejs-topic", {simple : true});
  //consumer2.on('error', error =>{ console.log(error); });
  //consumer2.on('message', message => { console.log(message); });

  //setInterval(function(){
    //producer.send({
      //topic    : 'transactions',
      //messages : {
        //id     : 'abc',
        //amount : 10.5
      //}
    //}).then( success =>{
      //console.log('message sent', success)
    //}, error =>{
      //console.log(error);
    //});
  //}, 1000);

  //setInterval(function(){
    //kafka.send({
      //simple   : true,
      //topic    : 'nodejs-topic',
      //messages : {
        //foo : 'hello',
        //bar : 'world'
      //}
    //}).then( success => {
      //console.log(`Message sent : ${JSON.stringify(success)}`)
    //}, error => {
      //console.log(error);
    //});
  //}, 1000)

} , error => {
  console.log(error);
});
